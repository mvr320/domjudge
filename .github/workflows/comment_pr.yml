name: Comment on PR

on: pull_request

jobs:
  welcome:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v3
        with:
          github-token: ${{secrets.GITHUB_TOKEN}}
          script: |
            var a = await github.pulls.listFiles({
              pull_number: context.payload.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
            });
            var b = await github.pulls.listReviews({
              pull_number: context.payload.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
            });
            //await github.pulls.createReview({
            //  pull_number: context.payload.number,
            //  owner: context.repo.owner,
            //  repo: context.repo.repo,
            //  body: "yes"
            //})
            //console.log(context.repo)
            //console.log(context)
            //console.log(github)
            //console.log(a)
            for (index = 0; index < b.length; ++index) {
              console.log(b[index]);
              console.log(b[index].user);
            }
            //b.forEach(function(entry) {
            //  console.log(entry.user);
            //});
            //console.log(b)

            
            // Get a list of all issues created by the PR opener
            // See: https://octokit.github.io/rest.js/#pagination
            //const creator = context.payload.sender.login
            //const opts = github.issues.listForRepo.endpoint.merge({
            //  ...context.issue,
            //  creator,
            //  state: 'all'
            //})
            //const issues = await github.paginate(opts)

            //for (const issue of issues) {
            //  if (issue.number === context.issue.number) {
            //    continue
            //  }

            //  if (issue.pull_request) {
            //    return // Creator is already a contributor.
            //  }
            //}

            //await github.issues.createComment({
            //  issue_number: context.issue.number,
            //  owner: context.repo.owner,
            //  repo: context.repo.repo,
            //  body: 'Welcome, new contributor!'
            //})
